angular.module("makemybooking.config",[]).constant("config",{defaultApiEndpoint:"/api"}).constant("appName","makemybooking-client").constant("appVersion","0.0.1").constant("appDescription","MakeMyBooking.co"),angular.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function n(e,n){var o=n;void 0===o&&(o=Math.min(t(e),3));var a=Math.pow(10,o),i=(e*a|0)%a;return{v:o,f:i}}var o={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤-",negSuf:"",posPre:"¤",posSuf:""}]},id:"en",pluralCat:function(e,t){var a=0|e,i=n(e,t);return 1==a&&0==i.v?o.ONE:o.OTHER}})}]),angular.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function n(e,n){var o=n;void 0===o&&(o=Math.min(t(e),3));var a=Math.pow(10,o),i=(e*a|0)%a;return{v:o,f:i}}var o={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["a.m.","p.m."],DAY:["duminică","luni","marți","miercuri","joi","vineri","sâmbătă"],MONTH:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],SHORTDAY:["Dum","Lun","Mar","Mie","Joi","Vin","Sâm"],SHORTMONTH:["ian.","feb.","mar.","apr.","mai","iun.","iul.","aug.","sept.","oct.","nov.","dec."],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd.MM.y HH:mm",shortDate:"dd.MM.y",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"RON",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"ro",pluralCat:function(e,t){var a=0|e,i=n(e,t);return 1==a&&0==i.v?o.ONE:0!=i.v||0==e||1!=e&&e%100>=1&&19>=e%100?o.FEW:o.OTHER}})}]),function(e){try{e=angular.module("makemybooking-client-templates")}catch(t){e=angular.module("makemybooking-client-templates",[])}e.run(["$templateCache",function(e){e.put("clients/clients.html",'<div class="row"><div class="col-md-6"><h2>{{ \'client.CreateNew\' | translate }}</h2><form role="form" name="form"><div class="form-group"><label for="displayName">{{ \'client.DisplayName\' | translate }}</label><input class="form-control" id="displayName" placeholder="{{ \'client.DisplayName\' | translate }}" ng-model="newClient.displayName"></div><div class="form-group"><label for="phone">{{ \'client.Phone\' | translate }}</label><input class="form-control" id="phone" placeholder="{{ \'client.Phone\' | translate }}" ng-model="newClient.phone"></div><button type="submit" class="btn btn-default" ng-click="createClient()" ng-disabled="form.$invalid">{{ \'common.Create\' | translate }}</button></form></div><div class="col-md-6"><h2>{{ \'client.Clients\' | translate }}</h2><p ng-if="clients.length === 0">-- {{ \'common.None\' | translate }} --</p><ul class="list-group"><li class="list-group-item" ng-repeat="client in clients"><div><div class="dropdown"><a href="" class="pull-right" ng-click="removeClient(client)" title="{{ \'common.Remove\' | translate }}"><span class="glyphicon glyphicon-remove"></span></a></div></div><h4 class="list-group-item-heading">{{client.displayName}} <small>{{client.phone}}</small></h4></li></ul></div></div>')}])}(),function(e){try{e=angular.module("makemybooking-client-templates")}catch(t){e=angular.module("makemybooking-client-templates",[])}e.run(["$templateCache",function(e){e.put("appointments/appointments.html",'<div class="row"><div class="col-md-6"><h2>{{ \'appointment.CreateNew\' | translate }}</h2><form role="form" name="form"><div class="form-group"><input class="form-control" id="title" placeholder="{{ \'appointment.DisplayName\' | translate }}" ng-model="newAppointment.title"></div><div class="form-group"><label for="dateAndTime">{{ \'appointment.DateTime\' | translate }}</label><div class="dropdown"><a class="dropdown-toggle" id="dropdown2" role="button" data-toggle="dropdown" data-target="#"><div class="input-group"><p class="form-control-static">{{ newAppointment.dateAndTime | date:\'d MMM, y H:mm\' }}</p></div></a><ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"><datetimepicker ng-model="newAppointment.dateAndTime" datetimepicker-config="{ dropdownSelector: \'#dropdown2\', startView: \'hour\', minuteStep: 15 }"></ul></div></div><div class="form-group"><label for="duration">{{ \'appointment.Duration\' | translate }}</label><select class="form-control" id="duration" ng-model="newAppointment.duration"><option value="15">15 {{ \'appointment.Minutes\' | translate }}</option><option value="30">30 {{ \'appointment.Minutes\' | translate }}</option><option value="60">60 {{ \'appointment.Minutes\' | translate }}</option><option value="90">90 {{ \'appointment.Minutes\' | translate }}</option></select></div><div class="form-group"><label for="client">{{ \'appointment.Client\' | translate }}</label><select class="form-control" id="client" ng-model="newAppointment.client" ng-options="client as client.displayName for client in clients"><option value="">{{ \'appointment.PickClient\' | translate }}</option></select></div><div class="form-group"><label for="resource">{{ \'appointment.Resource\' | translate }}</label><select class="form-control" id="resource" ng-model="newAppointment.resource" ng-options="resource as resource.displayName for resource in resources"><option value="">{{ \'appointment.PickResource\' | translate }}</option></select></div><div class="form-group"><label for="remarks">{{ \'appointment.Remarks\' | translate }}</label><textarea id="remarks" class="form-control" rows="3" ng-model="newAppointment.remarks"> </textarea></div><button type="submit" class="btn btn-default" ng-click="createAppointment()" ng-disabled="form.$invalid">{{ \'common.Create\' | translate }}</button></form></div><div class="col-md-6"><h2>{{ \'appointment.Upcoming\' | translate }}</h2><p ng-if="upcomingAppointments.length === 0">-- {{ \'common.None\' | translate }} --</p><ul class="list-group"><li class="list-group-item" ng-repeat="appointment in upcomingAppointments"><div><div class="dropdown"><a href="" class="pull-right" ng-click="removeAppointment(appointment)" title="{{ \'common.Remove\' | translate }}"><span class="glyphicon glyphicon-remove"></span></a> <a class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#" title="{{ \'appointment.Reschedule\' | translate }}" id="appointment{{$index}}" href="" ng-click="setAppointmentForEdit(appointment)"><span class="glyphicon glyphicon-time"></span></a><ul class="dropdown-menu" role="menu"><datetimepicker data-ng-model="editAppointment.dateAndTime" data-datetimepicker-config="{ dropdownSelector: \'#appointment{{$index}}\', startView: \'hour\', minuteStep: 15 }" on-set-time="reschedule(newDate, oldDate)"></ul></div></div><h4 class="list-group-item-heading">{{appointment.title}} <small>{{appointment.dateAndTime | date:\'d MMM, y H:mm\'}}-{{appointment.endDateAndTime | date:\'H:mm\'}}, duration {{appointment.duration}} mins</small></h4><p class="list-group-item-text">{{appointment.remarks}}</p></li></ul><h2>{{ \'appointment.Past\' | translate }}</h2><p ng-if="pastAppointments.length === 0">-- {{ \'common.None\' | translate }} --</p><ul class="list-group"><li class="list-group-item" ng-repeat="appointment in pastAppointments"><div><a href="" class="pull-right" ng-click="removeAppointment(appointment)" title="{{ \'common.Remove\' | translate }}"><span class="glyphicon glyphicon-remove"></span></a></div><h4 class="list-group-item-heading">{{appointment.title}} <small>{{appointment.dateAndTime | date:\'d MMM, y H:mm\'}}-{{appointment.endDateAndTime | date:\'H:mm\'}}, duration {{appointment.duration}} mins</small></h4><p class="list-group-item-text">{{appointment.remarks}}</p></li></ul></div></div>')}])}(),function(e){try{e=angular.module("makemybooking-client-templates")}catch(t){e=angular.module("makemybooking-client-templates",[])}e.run(["$templateCache",function(e){e.put("auth/login.html",'<h2>Login</h2><p>Appoints doesn\'t store user credentials such as usernames and passwords. It\'s required to use one of the providers below.</p><p></p><form novalidate class="simple-form">Username: <input ng-model="user.username"><br>Password: <input type="password" ng-model="user.password"><br><input type="submit" ng-click="loginLocal(user)" value="Login"></form>')}])}(),function(e){try{e=angular.module("makemybooking-client-templates")}catch(t){e=angular.module("makemybooking-client-templates",[])}e.run(["$templateCache",function(e){e.put("home/home.html","<footer class=\"pull-right\">{{ 'home.appName' | translate }} version {{version}} - &copy; 2015</footer>")}])}(),function(e){try{e=angular.module("makemybooking-client-templates")}catch(t){e=angular.module("makemybooking-client-templates",[])}e.run(["$templateCache",function(e){e.put("resources/resources.html",'<div class="row"><div class="col-md-6"><h2>{{ \'resource.CreateNew\' | translate }}</h2><form role="form" name="form"><div class="form-group"><label for="displayName">{{ \'resource.DisplayName\' | translate }}</label><input class="form-control" id="displayName" placeholder="{{ \'resource.DisplayName\' | translate }}" ng-model="newResource.displayName"></div><button type="submit" class="btn btn-default" ng-click="createResource()" ng-disabled="form.$invalid">{{ \'common.Create\' | translate }}</button></form></div><div class="col-md-6"><h2>{{ \'resource.Resources\' | translate }}</h2><p ng-if="resources.length === 0">-- {{ \'common.None\' | translate }} --</p><ul class="list-group"><li class="list-group-item" ng-repeat="resource in resources"><div><div class="dropdown"><a href="" class="pull-right" ng-click="removeResource(resource)" title="{{ \'common.Remove\' | translate }}"><span class="glyphicon glyphicon-remove"></span></a></div></div><h4 class="list-group-item-heading">{{resource.displayName}}</h4></li></ul></div></div>')}])}(),function(e){try{e=angular.module("makemybooking-client-templates")}catch(t){e=angular.module("makemybooking-client-templates",[])}e.run(["$templateCache",function(e){e.put("users/users.html",'<div class="row"><div class="col-md-6"><h2>{{ \'user.CreateNew\' | translate }}</h2><form role="form" name="form"><div class="form-group"><label for="displayName">{{ \'user.DisplayName\' | translate }}</label><input class="form-control" id="displayName" placeholder="{{ \'user.DisplayName\' | translate }}" ng-model="newUser.displayName"></div><div class="form-group"><label for="email">{{ \'user.Email\' | translate }}</label><input class="form-control" id="email" placeholder="{{ \'user.Email\' | translate }}" ng-model="newUser.email"></div><div class="form-group"><label for="provider">{{ \'user.Provider\' | translate }}</label><input class="form-control" id="provider" placeholder="{{ \'user.Provider\' | translate }}" ng-model="newUser.provider"></div><div class="form-group"><label for="password">{{ \'user.Password\' | translate }}</label><input type="password" class="form-control" id="password" placeholder="{{ \'user.Password\' | translate }}" ng-model="newUser.password"></div><button type="submit" class="btn btn-default" ng-click="createUser()" ng-disabled="form.$invalid">{{ \'common.Create\' | translate }}</button></form></div><div class="col-md-6"><h2>{{ \'user.Users\' | translate }}</h2><p ng-if="users.length === 0">-- {{ \'common.None\' | translate }} --</p><ul class="list-group"><li class="list-group-item" ng-repeat="user in users"><div><div class="dropdown"><a href="" class="pull-right" ng-click="removeUser(user)" title="{{ \'common.Remove\' | translate }}"><span class="glyphicon glyphicon-remove"></span></a></div></div><h4 class="list-group-item-heading">{{user.displayName}} <small>{{user.provider}}</small></h4><p class="list-group-item-text">{{user.email}}</p><p class="list-group-item-text">{{user.roles.join(\', \')}}</p></li></ul></div></div>')}])}(),function(e){try{e=angular.module("makemybooking-client-templates")}catch(t){e=angular.module("makemybooking-client-templates",[])}e.run(["$templateCache",function(e){e.put("shared/flash.html",'<section ng-controller="FlashCtrl" class="flashcontainer"><div ng-repeat="flashMessage in flashMessages" ng-class="getMessageClass(flashMessage.level)"><button type="button" class="close" data-dismiss="alert" ng-click="dismiss(flashMessage)">&times;</button> {{flashMessage.message}}<ul ng-if="flashMessage.details.errors"><li ng-repeat="error in flashMessage.details.errors">{{error.message}}</li></ul></div></section>')}])}(),angular.module("appoints.directives",[]),angular.module("appoints.flash",[]).factory("flash",["$rootScope","$timeout",function(e,t){function n(n,o,a){o=o||"info";var r={message:n,level:o,details:a};s.push(r),t(function(){i(r)},5e3),e.$broadcast("event:flash.add",r)}function o(e){e.message?n(e.message,"error",e):n(e,"error")}function a(){return s}function i(t){var n=s.indexOf(t);s.splice(n,1),e.$broadcast("event:flash.remove",t)}function r(){s=[],e.$broadcast("event:flash.clear",!0)}var s=[];return{add:n,addError:o,all:a,remove:i,clear:r}}]).controller("FlashCtrl",["$scope","flash",function(e,t){e.flashMessages=[],e.getMessageClass=function(e){return"error"===e&&(e="danger"),"alert alert-"+e},e.dismiss=function(e){t.remove(e)},e.$on("event:flash.add",function(){e.flashMessages=t.all()}),e.$on("event:flash.remove",function(){e.flashMessages=t.all()}),e.$on("event:flash.clear",function(){e.flashMessages=[],e.$apply()})}]).directive("apHideFlash",["flash",function(e){return{restrict:"A",link:function(t,n){n.bind("click",function(t){var n=angular.element(t.target);n.parents().hasClass("flashcontainer")||e.clear()})}}}]),angular.module("appoints.home",["makemybooking.config","ngRoute"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"home/home.html",controller:"HomeCtrl",title:"Home"})}]).controller("HomeCtrl",["$scope","appVersion",function(e,t){e.version=t}]),angular.module("appoints.api",["angular-hal","makemybooking.config"]).factory("appointsapi",["halClient","config",function(e,t){var n=e.$get(t.defaultApiEndpoint);return{apiRoot:n}}]),angular.module("appoints.appointments",["ngRoute","appoints.api"]).config(["$routeProvider",function(e){e.when("/appointments",{templateUrl:"appointments/appointments.html",controller:"AppointmentsCtrl",title:"Appointments"})}]).controller("AppointmentsCtrl",["$scope","$window","_","$translate","appointsapi","flash","moment",function(e,t,n,o,a,i,r){function s(){a.apiRoot.then(function(t){return t.$get("appointments").then(function(t){return t.$get("appointments").then(function(t){e.upcomingAppointments=n.filter(t,function(e){return r(e.dateAndTime)>r()}),e.pastAppointments=n.filter(t,function(e){return r(e.dateAndTime)<=r()})})},function(e){i.addError(e.data)})}),a.apiRoot.then(function(t){return t.$get("resources").then(function(t){return t.$get("resources").then(function(t){e.resources=t})},function(e){i.addError(e.data)})}),a.apiRoot.then(function(t){return t.$get("clients").then(function(t){return t.$get("clients").then(function(t){e.clients=t})},function(e){i.addError(e.data)})})}function l(){e.newAppointment={title:"",dateAndTime:r().startOf("day").add(1,"days").add(9,"hours").toDate(),duration:30,remarks:""},e.editAppointment=null}e.getEndTime=function(e){return r(e.dateAndTime).add(e.duration,"minutes").format("H:mm")},e.createAppointment=function(){return a.apiRoot.then(function(t){return e.newAppointment.endDateAndTime=r(e.newAppointment.dateAndTime).add(e.newAppointment.duration,"minutes"),t.$post("appointments",null,e.newAppointment).then(function(){i.add("Appointment created successfully","info"),l()},function(e){i.addError(e.data)})}).then(s)},e.removeAppointment=function(e){return t.confirm(o.instant("common.AreYouSure"))?e.$del("self").then(function(e){i.add(e.message)},function(e){i.addError(e.data)}).then(s):void 0},e.setAppointmentForEdit=function(t){e.editAppointment=angular.copy(t)},e.reschedule=function(t){if(e.editAppointment){e.editAppointment.dateAndTime=t,e.editAppointment.endDateAndTime=r(e.editAppointment.dateAndTime).add(e.editAppointment.duration,"minutes").toDate();var o=n(e.upcomingAppointments).find({id:e.editAppointment.id});return o.$patch("self",null,{dateAndTime:e.editAppointment.dateAndTime,endDateAndTime:e.editAppointment.endDateAndTime}).then(function(){i.add("Appointment is rescheduled")},function(e){i.addError(e.data)}).then(s)}},l(),s()}]),angular.module("appoints.usersession",["appoints.api","appoints.flash","makemybooking.config"]).factory("usersession",["$rootScope","$window","config","flash","appointsapi","_",function(e,t,n,o,a,i){function r(){return angular.copy(u,this)}function s(n){return t.localStorage.setItem("access_token",n),a.apiRoot.then(function(t){return t.$get("me").then(function(t){c.isAuthenticated=!0,c.userId=t.userId,c.displayName=t.displayName,c.roles=t.roles,e.$broadcast("event:loggedin",c)},function(e){o.add(e.message,"error")})})}function l(){t.localStorage.removeItem("access_token"),c=new r,e.$broadcast("event:loggedout",c)}var u={userId:"",displayName:"",isAuthenticated:!1,roles:[],isInRole:function(e){return this.isAuthenticated&&i(this.roles).contains(e)},isAdmin:function(){return this.isInRole("admin")},isCustomer:function(){return this.isInRole("customer")}},c=new r,p="";return{current:c,login:s,logout:l,returnTo:p}}]).run(["$window","$rootScope","$log","appointsapi","usersession",function(e,t,n,o,a){null!==e.localStorage.getItem("access_token")&&o.apiRoot.then(function(e){e.$get("me").then(function(e){a.current.isAuthenticated=!0,a.current.userId=e.userId,a.current.displayName=e.displayName,a.current.roles=e.roles,t.$broadcast("event:loggedin",a.current)},function(e){n.info("Unable to login automatically: "+e.message)})})}]),angular.module("appoints.clients",["ngRoute","appoints.api"]).config(["$routeProvider",function(e){e.when("/clients",{templateUrl:"clients/clients.html",controller:"ClientsCtrl",title:"Clients"})}]).controller("ClientsCtrl",["$scope","$window","_","$translate","appointsapi","flash","moment",function(e,t,n,o,a,i){function r(){return a.apiRoot.then(function(t){return t.$get("clients").then(function(t){return t.$get("clients").then(function(t){e.clients=t})},function(e){i.addError(e.data)})})}function s(){e.newClient={displayName:""}}e.createClient=function(){return a.apiRoot.then(function(t){return t.$post("clients",null,e.newClient).then(function(){i.add("Client created successfully","info"),s()},function(e){i.addError(e.data)})}).then(r)},e.removeClient=function(e){return t.confirm(o.instant("common.AreYouSure"))?e.$del("self").then(function(e){i.add(e.message)},function(e){i.addError(e.data)}).then(r):void 0},s(),r()}]),angular.module("appoints.resources",["ngRoute","appoints.api"]).config(["$routeProvider",function(e){e.when("/resources",{templateUrl:"resources/resources.html",controller:"ResourcesCtrl",title:"Resources"})}]).controller("ResourcesCtrl",["$scope","$window","_","$translate","appointsapi","flash",function(e,t,n,o,a,i){function r(){return a.apiRoot.then(function(t){return t.$get("resources").then(function(t){return t.$get("resources").then(function(t){e.resources=t})},function(e){i.addError(e.data)})})}function s(){e.newResource={displayName:""}}e.createResource=function(){return a.apiRoot.then(function(t){return t.$post("resources",null,e.newResource).then(function(){i.add("Resource created successfully","info"),s()},function(e){i.addError(e.data)})}).then(r)},e.removeResource=function(e){return t.confirm(o.instant("common.AreYouSure"))?e.$del("self").then(function(e){i.add(e.message)},function(e){i.addError(e.data)}).then(r):void 0},s(),r()}]),angular.module("appoints.users",["ngRoute","appoints.api"]).config(["$routeProvider",function(e){e.when("/users",{templateUrl:"users/users.html",controller:"UsersCtrl",title:"Users"})}]).controller("UsersCtrl",["$scope","$window","_","$translate","appointsapi","flash",function(e,t,n,o,a,i){function r(){return a.apiRoot.then(function(t){return t.$get("users").then(function(t){return t.$get("users").then(function(t){e.users=t})},function(e){i.addError(e.data)})})}function s(){e.newUser={displayName:"",email:"",password:"",provider:"local"}}e.createUser=function(){return a.apiRoot.then(function(t){return t.$post("users",null,e.newUser).then(function(){i.add("User created successfully","info"),s()},function(e){i.addError(e.data)})}).then(r)},e.removeUser=function(e){return t.confirm(o.instant("common.AreYouSure"))?e.$del("self").then(function(e){i.add(e.message)},function(e){i.addError(e.data)}).then(r):void 0},s(),r()}]),angular.module("appoints.authinterceptor",["appoints.usersession"]).factory("authInterceptor",["$rootScope","$q","$window","$location","$log","$injector",function(e,t,n,o,a,i){return{request:function(e){return e.headers=e.headers||{},n.localStorage.getItem("access_token")&&(e.headers.Authorization="Bearer "+n.localStorage.getItem("access_token")),e},response:function(e){return 401===e.status&&a.warn("Response 401"),e||t.when(e)},responseError:function(e){if(401===e.status){var n=i.get("usersession");a.info("Response Error 401",e),n.logout();var r=o.path();o.path("/login").search("returnTo",r)}return t.reject(e)}}}]).config(["$httpProvider",function(e){e.interceptors.push("authInterceptor")}]),angular.module("appoints.login",["makemybooking.config","appoints.usersession","appoints.api","ngRoute"]).config(["$routeProvider",function(e){e.when("/login",{templateUrl:"auth/login.html",controller:"LoginCtrl",title:"Login"})}]).run(["$window","$rootScope","$location","config","usersession",function(e,t,n,o,a){t.authLogin=function(e){a.login(e).then(function(){t.loginPopup&&(t.loginPopup.close(),delete t.loginPopup),a.returnTo?n.url(a.returnTo):n.url("/")})},e.addEventListener("message",function(e){e.origin===o.defaultApiEndpoint&&t.authLogin(e.data)},!1)}]).controller("LoginCtrl",["$scope","$rootScope","$window","$location","config","usersession","appointsapi",function(e,t,n,o,a,i,r){function s(e){return t.loginPopup=l(e,"authenticate",640,500),!1}function l(e,t,o,a){var i=screen.width/2-o/2,r=screen.height/2-a/2;return n.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+o+", height="+a+", top="+r+", left="+i)}i.returnTo=o.search().returnTo,e.loginFacebook=function(){return s(a.defaultApiEndpoint+"/auth/facebook")},e.loginGoogle=function(){return s(a.defaultApiEndpoint+"/auth/google")},e.loginLocal=function(e){r.apiRoot.then(function(n){return n.$get("localauth",{username:e.username,password:e.password}).then(function(e){t.authLogin(e.token)})})}}]),angular.module("appoints",["ngRoute","pascalprecht.translate","tmh.dynamicLocale","ui.bootstrap.datetimepicker","appoints.directives","appoints.flash","appoints.usersession","appoints.authinterceptor","appoints.home","appoints.login","appoints.appointments","appoints.resources","appoints.clients","appoints.users","makemybooking-client-templates"]).constant("_",window._).constant("moment",window.moment).config(["$httpProvider","$translateProvider","tmhDynamicLocaleProvider",function(e,t,n){e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"],t.preferredLanguage("en"),t.useStaticFilesLoader({prefix:"/i18n/",suffix:".json"}),n.defaultLocale("en"),n.localeLocationPattern("/i18n/angular-locale_{{locale}}.js")}]).controller("AppCtrl",["$scope","$location","$translate","tmhDynamicLocale","usersession",function(e,t,n,o,a){var i="Appoints";e.pageTitle=i,e.$on("$routeChangeSuccess",function(t,n){e.pageTitle=n.title||i}),e.user=a.current,e.routeIs=function(e){return t.path()===e},e.logout=function(){a.logout(),t.url("/")},e.$on("event:loggedin",function(t,n){e.user=n}),e.$on("event:loggedout",function(t,n){e.user=n}),e.changeLanguage=function(e){n.use(e),o.set(e)},e.langKey=n.proposedLanguage()}]);
